<?php
  //////////////////////////////////////////////////////////////////////////////
  // CSS Editor
  //////////////////////////////////////////////////////////////////////////////

  //////////////////////////////////////////////////////////////////////////////
  //Модуль добавляет новую таблицу стилей в систему
  //////////////////////////////////////////////////////////////////////////////


  //////////////////////////////////////////////////////////////////////////////
  //Обработчик формы
  //////////////////////////////////////////////////////////////////////////////

  if(!empty($_POST))
  {
    //фильтрация данных
    $file  = correct_input($_POST['file']);
    if(strpos($file, '.css') === false)
      $file  .= ".css";

    if(preg_match("/[^a-z0-9_\.]/i", $file) || strlen($file) == 0)
      $errors[] = $l_css[11];
    elseif(preg_match("/[0-9]/i", $file[0]))
      $errors[] = $l_css[12];

    if(empty($errors))
    {
    	 //создание пустого файла в директории /css
    	 save_in_file("{$gl_path_to_root}css/{$file}", '', 'w');

	     //осуществляем переход в список разделов.
	     echo "<HTML><HEAD><META HTTP-EQUIV='Refresh' CONTENT='0; URL=?adm=css_list'></HEAD></HTML>";
	     return;
    }
  }

  //////////////////////////////////////////////////////////////////////////////
  //Форма
  //////////////////////////////////////////////////////////////////////////////

  //заголовок
  print "<h1>{$l_css[10]}</h1><br />";

  //подключаем форму
  include("{$gl_path_to_engine}css/_css_edit.inc");

  //ссылка "назад"
  print "<p><a class='Mustgreen' href='?adm=css_list'>{$l_css[9]}</a></p>";

?>